<!--- Generated by 'make generate'. Do not manually edit. -->
<html>

<head>
    <title>Census Data</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    {{#if squirrel_count}}

    <h1>Census Data</h1>

    <div id="facets">
        During the 2018 Squirrel Census,

        {{ squirrel_count }}

        <form action="/">
        <select name="age" id="age">
            <option value="Adult">Adult</option>
            <option value="Juvenile">Juvenile</option>
        </select>

        <select name="fur" id="fur">
            <option value="Gray">Gray</option>
            <option value="Black">Black</option>
            <option value="Cinnamon">Cinnamon</option>
        </select>

        squirrels were observed

        <select name="location" id="location">
            <option value="Above Ground">Above Ground</option>
            <option value="Ground Plane">on the Ground Plane</option>
        </select>.

        <button id="submit">Update</button>
        </form>

        <script>
        // Select dropdowns from querystring

        this_url = new URL(window.location.href)

        selected_fur = this_url.searchParams.get("fur");
        document.querySelector('option[value="'+selected_fur+'"]').selected = true

        selected_location = this_url.searchParams.get("location");
        document.querySelector('option[value="'+selected_location+'"]').selected = true

        selected_age = this_url.searchParams.get("age");
        document.querySelector('option[value="'+selected_age+'"]').selected = true

        </script>

    </div>

    <div id="chart" style="height: 500px; width: 500px">
        <canvas id="chart_canvas"></canvas>
    </div>

    <script th:inline="javascript">
        
        var count = {{ squirrel_count }};
        var points = [{{ data_points }}];
        

        set1_col = "#8e39a7"
        set2_col = "#39a78e"

        const data = {
            labels: ['Running', 'Climbing', 'Chasing', 'Eating', 'Foraging'],
            datasets: [
                {
                    label: 'Squirrels',
                    data: points,
                    fill: true,
                    backgroundColor: set1_col + "42",
                    borderColor: set1_col,
                    pointBackgroundColor: set1_col,
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: set1_col,
                }
            ]
        };

        const config = {
            type: 'radar',
            data: data,
            options: {
                plugins: {
                    legend: {
                        display: false
                    }
                },
                elements: {
                    line: {
                        borderWidth: 3
                    }
                },
            },
        };

        const ctx = document.getElementById('chart_canvas');
        new Chart(ctx, config);
    </script>

    <div id="footer">
        Data represents the number of squirrels observed performing
        described activities during the survey period.
    </div>

    {{else}}

    <div>No data available. <a href="#">Follow the tutorial instructions</a>.</div>

    {{/if}}

    <style>
    body { 
        font-family: 'Helvetica Neue';
    }

    #footer { 
        font-size: 0.7em; 
    }

    form { display: inline-block} 
    </style>
</body>

</html>